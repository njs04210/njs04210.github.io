---
## layout: post
## title:  [ëª¨ì˜ SW ì—­ëŸ‰í…ŒìŠ¤íŠ¸] 1949. ë“±ì‚°ë¡œ ì¡°ì„±
categories: [SWEA]
comments: true
---

### [ğŸ‘‰ ë¬¸ì œ ë³´ëŸ¬ê°€ê¸°](https://swexpertacademy.com/main/code/problem/problemDetail.do?contestProbId=AV5PoOKKAPIDFAUq&)  


#### Key Point



---

```python
def make_road(x, y, cnt, visited, cut_cnt):
    global answer, k

    for i in range(4):
        nx = x + dy[i]
        ny = y + dx[i]
        if nx < 0 or nx >= n or ny < 0 or ny >= n: continue
        if visited[nx][ny]: continue
        if MAP[nx][ny] >= MAP[x][y]: continue
        visited[nx][ny] = 1
        make_road(nx, ny, cnt+1, visited, cut_cnt)
        visited[nx][ny] = 0

    # ë” ì´ìƒ ê°ˆ ê³³ ì—†ì„ë•Œ ì§€í˜• ê¹ê¸°
    if cut_cnt:
        for i in range(4):
            nx = x + dy[i]
            ny = y + dx[i]
            if nx < 0 or nx >= n or ny < 0 or ny >= n: continue
            if visited[nx][ny]: continue
            if 0 <= MAP[nx][ny] - cut_cnt < MAP[x][y]:
                MAP[nx][ny] -= cut_cnt
                visited[nx][ny] = 1
                make_road(nx, ny, cnt+1, visited, 0)
                MAP[nx][ny] += cut_cnt
                visited[nx][ny] = 0

    answer = max(answer, cnt)

dx, dy = [1,0,-1,0], [0,1,0,-1]
T = int(input())
for test_case in range(1, T + 1):
    answer = -2147000000
    n, k = map(int, input().split())
    MAP = []

    # ê°€ì¥ ë†’ì€ ì§€í˜•ì˜ ë†’ì´ ì°¾ê¸°
    max_val = -2147000000
    for _ in range(n):
        a = list(map(int, input().split()))
        if max(a) > max_val:
            max_val = max(a)
        MAP.append(a)

    # ê°€ì¥ ë†’ì€ ì§€í˜•ì˜ ìœ„ì¹˜ ì°¾ê¸°
    highest_Loc = []
    for i in range(n):
        for j in range(n):
            if MAP[i][j] == max_val:
                highest_Loc.append((i,j))

    for i in range(len(highest_Loc)):
        sx, sy = highest_Loc[i]
        ch = [[0 for _ in range(n)] for _ in range(n)]
        ch[sx][sy] = 1
        for j in range(k+1):
            make_road(sx, sy, 1, ch, j)

    print(f'#{test_case} {answer}')
```