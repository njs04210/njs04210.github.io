---
## layout: post
## title:  [ëª¨ì˜ SW ì—­ëŸ‰í…ŒìŠ¤íŠ¸] 5648. ì›ì ì†Œë©¸ ì‹œë®¬ë ˆì´ì…˜
categories: [Algorithm]
comments: true
---

### [ğŸ‘‰ ë¬¸ì œ ë³´ëŸ¬ê°€ê¸°](https://swexpertacademy.com/main/code/problem/problemDetail.do?contestProbId=AWXRFInKex8DFAUo)  


#### Key Point



---


```python
dx, dy = [0,0,-1,1], [1,-1,0,0]
MAP = [[0 for _ in range(4001)] for _ in range(4001)] # í•´ë‹¹ ì¢Œí‘œì— ì¡´ì¬í•˜ëŠ” ì›ìì˜ ê°œìˆ˜ ì €ì¥
T = int(input())
for test_case in range(1, T + 1):
    n = int(input())
    atoms = []
    remove_list, flame_list = [], set()
    answer = 0

    for _ in range(n):
        x, y, d, e = list(map(int, input().split()))
        # ì¢Œí‘œ ë³´ì •
        ax, ay = (x+1000) * 2, (y+1000) * 2
        atoms.append([ax, ay, d, e])
        MAP[ax][ay] = 1

    while atoms:
        for i in range(len(atoms)):
            x, y, d, e = atoms[i]
            nx = x + dx[d]
            ny = y + dy[d]
            if nx < 0 or nx >= 4001 or ny < 0 or ny >= 4001: # ë²”ìœ„ ì´ˆê³¼í•˜ëŠ” ê²½ìš°
                remove_list.append(i)
                continue

            MAP[x][y] -= 1
            MAP[nx][ny] += 1
            atoms[i][0], atoms[i][1] = nx, ny

        # remove_listì— ë“¤ì–´ìˆëŠ” ì›ì ì œê±°í•˜ê¸°
        while remove_list:
            idx = remove_list.pop()
            MAP[atoms[idx][0]][atoms[idx][1]] -= 1
            atoms.pop(idx)

        # ì›ì 2ê°œ ì´ìƒì¸ ì¢Œí‘œ ì²´í¬í•˜ê¸°
        for a in atoms:
            x, y = a[0], a[1]
            if MAP[x][y] >= 2:
                flame_list.add((x,y))

        if flame_list:
            for x, y in flame_list:
                for i in range(len(atoms)-1, -1, -1):
                    ax, ay, e = atoms[i][0], atoms[i][1], atoms[i][3]
                    if x == ax and y == ay:
                        MAP[x][y] -= 1
                        answer += e
                        atoms.pop(i)
            flame_list.clear()

    print(f'#{test_case} {answer}')
```