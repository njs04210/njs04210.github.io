---
## layout: post
## title:  [ìœ„í´ë¦¬ ì±Œë¦°ì§€]3ì£¼ì°¨_í¼ì¦ ì¡°ê° ì±„ìš°ê¸°
categories: [í”„ë¡œê·¸ë˜ë¨¸ìŠ¤]
comments: true
---

### [ğŸ‘‰ ë¬¸ì œ ë³´ëŸ¬ê°€ê¸°](https://programmers.co.kr/learn/courses/30/lessons/84021)  


í•´ê²°ë°©ë²•ì„ ê°„ëµí•˜ê²Œ ìš”ì•½í•˜ë©´,  


â‘  pieces ì°¾ê¸° (í¼ì¦ ì¡°ê° ë­‰ì¹˜ ì°¾ê¸°)  
tableì„ **bfs**ë¡œ ëŒë©´ì„œ í¼ì¦ ì¡°ê° ë­‰ì¹˜(pieces)ë¥¼ ì°¾ê³ , keyë¥¼ 'í•´ë‹¹ ë­‰ì¹˜ì˜ í¼ì¦ ì¡°ê° ìˆ˜', valueë¥¼ 'í¼ì¦ ì¡°ê°ë“¤ì˜ ìƒëŒ€ì ì¸ ì¢Œí‘œ'ë¡œ í•˜ì—¬ dict_num_of_piecesì— ì €ì¥í•œë‹¤.  


â‘¡ empty_space ì°¾ê¸° (ë¹ˆì¹¸ ë­‰ì¹˜ ì°¾ê¸°)  
game_boardë¥¼ **bfs**ë¡œ ëŒë©´ì„œ ë¹ˆì¹¸ ë­‰ì¹˜(empty_space)ë¥¼ ì°¾ê³ , ë¹ˆì¹¸ ë­‰ì¹˜ì— ë„£ì„ ìˆ˜ ìˆëŠ” í¼ì¦ ì¡°ê°ì„ ì°¾ê¸° ìœ„í•´ dict_num_of_piecesì—ì„œ ë¹ˆì¹¸ì˜ ê°œìˆ˜ë¡œ ê°€ëŠ¥í•œ í¼ì¦ ì¡°ê° í›„ë³´ë¥¼ ë½‘ì•„ë‚¸ë‹¤.  


â‘¢ find_blocks (ë¹ˆì¹¸ì— ë”± ë§ëŠ” í¼ì¦ ì¡°ê° ì°¾ê¸°)  
0ë„, 90ë„, 180ë„, 270ë„ ì´ 4ë²ˆ íšŒì „í•  ìˆ˜ ìˆë‹¤.  
empty_spaceì˜ ê°’ì„ ìƒëŒ€ì ì¸ ì¢Œí‘œ ì§‘í•©ìœ¼ë¡œ ë³€í™˜í•˜ê³  (nempty_space), í¼ì¦ ì¡°ê° í›„ë³´ ì•ˆì— ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.  
ìˆìœ¼ë©´, í•´ë‹¹ í¼ì¦ ì¡°ê°ì„ ì‚¬ìš©í•˜ì—¬ ë¹ˆì¹¸ì„ ì±„ì›Œë„£ê¸° ë•Œë¬¸ì— remove í•´ì¤€ ë’¤ ì±„ìš´ ì¹¸ì˜ ìˆ˜(len(nempty_blocks))ë¥¼ ë¦¬í„´í•œë‹¤.  
ì—†ë‹¤ë©´, empty_spaceë¥¼ rotateí•˜ì—¬ ì¬í™•ì¸í•œë‹¤.


#### â˜…â˜…â˜… ì¢Œí‘œë¡œ êµ¬ì„±ëœ ë„í˜•ì„ ì‹œê³„ë°©í–¥ìœ¼ë¡œ 90ë„ íšŒì „í•˜ëŠ” ë°©ë²•
- rotate_space í•¨ìˆ˜ì—ì„œì˜ (y, n-x-1) ì— ì£¼ëª©í•˜ì.  
**(x, y) â†’ (y, n-x-1)** ë¥¼ í†µí•´ 90ë„ ì‹œê³„ë°©í–¥ìœ¼ë¡œ íšŒì „í•  ìˆ˜ ìˆë‹¤.  
ë‹¤ë§Œ ì´í›„ì— ìƒëŒ€ì ì¸ ì¢Œí‘œë¡œ ë³€í™˜í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤.



```python
from collections import defaultdict
from collections import deque

def rotate_space(a, n):
    new_a = set()
    
    for x, y in a:
        new_a.add((y, n-x-1))
    
    return new_a
    
def find_blocks(empty_space, pieces, n):
    
    for _ in range(4):
        mx, my = min(empty_space)
        nempty_space = set()
    
        for x, y in empty_space:
            nempty_space.add((x-mx, y-my))
            
        if nempty_space in pieces:
            pieces.remove(nempty_space)
            return len(nempty_space)
        
        empty_space = rotate_space(empty_space, n)
    
    return 0
    
def bfs(x, y, a, visited, target):
    sx, sy = x, y
    dx, dy = [1,0,-1,0], [0,1,0,-1]
    n = len(a)
    
    q = deque([(x,y)])
    relative_Loc = set([(0,0)])
    
    while q:
        x, y = q.popleft()
        for i in range(4):
            nx = x + dy[i]
            ny = y + dx[i]
            if nx < 0 or nx >= n or ny < 0 or ny >= n: continue
            if a[nx][ny] == target and not visited[nx][ny]:
                visited[nx][ny] = True
                q.append((nx,ny))
                relative_Loc.add((nx-sx, ny-sy))
    
    return relative_Loc

def solution(game_board, table):
    
    dict_num_of_pieces = defaultdict(list)
    n = len(table)
    visited = [[False for _ in range(n)] for _ in range(n)]
    answer = 0
    
    # pieces ì°¾ê¸°
    for i in range(n):
        for j in range(n):
            if table[i][j] == 1 and not visited[i][j]:
                visited[i][j] = True
                pieces = bfs(i,j, table, visited, 1)
                dict_num_of_pieces[len(pieces)].append(pieces)
    
    # ë¹ˆì¹¸ ëª¨ì–‘ ì°¾ê¸°
    visited = [[False for _ in range(n)] for _ in range(n)]
    for i in range(n):
        for j in range(n):
            if game_board[i][j] == 0 and not visited[i][j]:
                visited[i][j] = True
                empty_space = bfs(i,j, game_board, visited, 0)
                if len(empty_space) in dict_num_of_pieces:
                    answer += find_blocks(empty_space, dict_num_of_pieces[len(empty_space)], n)
    
    return answer
```