---
## layout: post
## title:  [ëª¨ì˜ SW ì—­ëŸ‰í…ŒìŠ¤íŠ¸] 5650. í•€ë³¼ ê²Œì„
categories: [SWEA]
comments: true
---

### [ğŸ‘‰ ë¬¸ì œ ë³´ëŸ¬ê°€ê¸°](https://swexpertacademy.com/main/code/problem/problemDetail.do?contestProbId=AWXRF8s6ezEDFAUo)  


#### Key Point



---


```python
from collections import defaultdict

def move(x, y, d, result):
    global answer, r, c

    while True:
        x += dy[d]
        y += dx[d]

        # ë²½ì„ ë§Œë‚¬ì„ ë•Œ
        if x < 0 or x >= n or y < 0 or y >= n:
            d = rev[5][d]  # ë°©í–¥ë°”ê¾¸ê¸°
            result += 1
            continue

        # ì¢…ë£Œì¡°ê±´ >> ì¶œë°œ ìë¦¬ë¡œ ë˜ëŒì•„ì™”ì„ë•Œ or ë¸”ë™í™€ ë§Œë‚¬ì„ë•Œ
        if (x == r and y == c) or board[x][y] == -1:
            answer = max(result, answer)
            return

        # ë¸”ë¡ì— ë¶€ë”ªí˜”ì„ ë•Œ
        if 1 <= board[x][y] <= 5:
            d = rev[board[x][y]][d]
            result += 1
            continue

        # ì›œí™€ ë§Œë‚¬ì„ë•Œ
        if 6 <= board[x][y] <= 10:
            for wx, wy in w_hole[board[x][y]]:
                if wx == x and wy == y: continue
                move(wx, wy, d, result)
            return

dx, dy = [0,0,-1,1], [-1,1,0,0]
rev = {1: [1, 3, 0, 2], 2: [3, 0, 1, 2], 3: [2, 0, 3, 1], 4: [1, 2, 3, 0], 5: [1, 0, 3, 2]}

T = int(input())
for test_case in range(1, T + 1):
    n = int(input())
    board = [list(map(int, input().split())) for _ in range(n)]
    start = []
    w_hole = defaultdict(list) # ì›œí™€
    answer = -2147000000

    # ê°€ëŠ¥í•œ í•€ë³¼ ì¶œë°œ ì¢Œí‘œ
    for i in range(n):
        for j in range(n):
            if board[i][j] == 0:
                start.append([i,j])
            elif 6 <= board[i][j] <= 10:
                w_hole[board[i][j]].append([i,j])

    for r, c in start:
        for i in range(4):
            move(r, c, i, 0)

    print(f'#{test_case} {answer}')
```